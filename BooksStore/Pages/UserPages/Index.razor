@page "/"
@using Microsoft.AspNetCore.Components.WebAssembly.Hosting
@inject IBooksService BooksService
@inject IConfiguration Configuration
@inject IWebAssemblyHostEnvironment Host

<PageTitle>Home</PageTitle>




@* <BookCard Book="_firstBook" />
<BookCard Book="_firstBook" WithButton="false" class="mt-3"/> *@
<h2>Welcome to BooksStore!</h2>
<h3 class="fs-4">Available Books</h3>
<hr />
<div style="display: flex;">
    @foreach(var book in _books){
        <BookCard Book="book" OnAddToCartClicked="AddToCart"/>
    }
</div>

<hr />

<h3 class="mt-3 fs-4">My Cart</h3>
<ul>
    @foreach(var item in _booksCart){
        <li>@item?.Title</li>
    }
</ul>


<ModalPopup Title="Hi!" IsOpen="@_isWelcomeModalOpen" OnCloseClicked="() => _isWelcomeModalOpen = false">
	<ChildContent>
		<p>Welcome to our Books Store, here you will find a huge collection of books to help you build you career in software development, enjoy it!</p>
	</ChildContent>
	<FooterContent>
		<button class="btn btn-primary" @onclick="() => _isWelcomeModalOpen = false">Discover It</button>
	</FooterContent>
</ModalPopup>

@code{
    private bool _isWelcomeModalOpen = true;
    private List<Book> _books = new List<Book>();
    private List<Book> _booksCart = new List<Book>();
    protected override async Task OnInitializedAsync(){
        _books = await BooksService.GetAllBooksAsync();
    }

    private void AddToCart(Book selectedBook){
        _booksCart.Add(selectedBook);
    }

}
